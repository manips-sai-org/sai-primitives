<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sai Primitives: SaiPrimitives::SingularityHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sai Primitives<span id="projectnumber">&#160;v1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceSaiPrimitives.html">SaiPrimitives</a></li><li class="navelem"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html">SingularityHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classSaiPrimitives_1_1SingularityHandler-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">SaiPrimitives::SingularityHandler Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a97a2c22759fcccaed3662e913731449d" id="r_a97a2c22759fcccaed3662e913731449d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a97a2c22759fcccaed3662e913731449d">SingularityHandler</a> (std::shared_ptr&lt; SaiModel::SaiModel &gt; robot, const std::string &amp;link_name, const Affine3d &amp;compliant_frame, const int &amp;task_rank, const bool &amp;verbose=false)</td></tr>
<tr class="memdesc:a97a2c22759fcccaed3662e913731449d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Singularity Handler task.  <br /></td></tr>
<tr class="separator:a97a2c22759fcccaed3662e913731449d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb62b4276c070f27ff6e32b4fba2664f" id="r_aeb62b4276c070f27ff6e32b4fba2664f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#aeb62b4276c070f27ff6e32b4fba2664f">updateTaskModel</a> (const MatrixXd &amp;projected_jacobian, const MatrixXd &amp;N_prec)</td></tr>
<tr class="memdesc:aeb62b4276c070f27ff6e32b4fba2664f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the model quantities for the singularity handling task, and performs singularity classification.  <br /></td></tr>
<tr class="separator:aeb62b4276c070f27ff6e32b4fba2664f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb4d6c8ba6b880be03923ebf8210d46" id="r_a3cb4d6c8ba6b880be03923ebf8210d46"><td class="memItemLeft" align="right" valign="top">VectorXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a3cb4d6c8ba6b880be03923ebf8210d46">computeTorques</a> (const VectorXd &amp;unit_mass_force, const VectorXd &amp;force_related_terms)</td></tr>
<tr class="memdesc:a3cb4d6c8ba6b880be03923ebf8210d46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the torques from the singularity handling. If the projected jacobian isn't classified singular, then the torque is computed as usual. If the projected jacobian is classified singular, then the torque is computed as \tau = \tau_{ns} + (1 - _alpha) * \tau_{joint strategy} + \alpha * \tau_{s} where \alpha is the linear blending ratio, \tau_{ns} is the torque computed from the non-singular terms, \tau_{s} is the torque computed from the singular terms, and \tau_{joint strategy} is the torque computed from the singularity strategy.  <br /></td></tr>
<tr class="separator:a3cb4d6c8ba6b880be03923ebf8210d46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290bfb604dc08038bae73563dbae161e" id="r_a290bfb604dc08038bae73563dbae161e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a290bfb604dc08038bae73563dbae161e">setDynamicDecouplingType</a> (const <a class="el" href="namespaceSaiPrimitives.html#afca8ab8f36feaebb1870cc5d4002e9a7">DynamicDecouplingType</a> &amp;type)</td></tr>
<tr class="memdesc:a290bfb604dc08038bae73563dbae161e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the dynamic decoupling type.  <br /></td></tr>
<tr class="separator:a290bfb604dc08038bae73563dbae161e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a84153fb11d1d20605e7106e5b9c44" id="r_a75a84153fb11d1d20605e7106e5b9c44"><td class="memItemLeft" align="right" valign="top"><a id="a75a84153fb11d1d20605e7106e5b9c44" name="a75a84153fb11d1d20605e7106e5b9c44"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setBoundedInertiaEstimateThreshold</b> (const double &amp;threshold)</td></tr>
<tr class="separator:a75a84153fb11d1d20605e7106e5b9c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81dfb02810be94a825c6f8d1e8f0c47f" id="r_a81dfb02810be94a825c6f8d1e8f0c47f"><td class="memItemLeft" align="right" valign="top"><a id="a81dfb02810be94a825c6f8d1e8f0c47f" name="a81dfb02810be94a825c6f8d1e8f0c47f"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>getBoundedInertiaEstimateThreshold</b> ()</td></tr>
<tr class="separator:a81dfb02810be94a825c6f8d1e8f0c47f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6e626bc2a60dea2372cce7ba358823e" id="r_ab6e626bc2a60dea2372cce7ba358823e"><td class="memItemLeft" align="right" valign="top">MatrixXd&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#ab6e626bc2a60dea2372cce7ba358823e">getNullspace</a> ()</td></tr>
<tr class="memdesc:ab6e626bc2a60dea2372cce7ba358823e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the nullspace.  <br /></td></tr>
<tr class="separator:ab6e626bc2a60dea2372cce7ba358823e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f03bbda20e55a20ba68a231e0248d6c" id="r_a9f03bbda20e55a20ba68a231e0248d6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a9f03bbda20e55a20ba68a231e0248d6c">setSingularityHandlingBounds</a> (const double &amp;s_min, const double &amp;s_max)</td></tr>
<tr class="memdesc:a9f03bbda20e55a20ba68a231e0248d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the singularity bounds for torque blending based on the inverse of the condition number The linear blending coefficient \alpha is computed as \alpha = (s - _s_min) / (_s_max - _s_min), and is clamped between 0 and 1.  <br /></td></tr>
<tr class="separator:a9f03bbda20e55a20ba68a231e0248d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a35fe74e148b3b8d1456c2d6d67815" id="r_a86a35fe74e148b3b8d1456c2d6d67815"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a86a35fe74e148b3b8d1456c2d6d67815">setSingularityHandlingGains</a> (const double &amp;kp_type_1, const double &amp;kv_type_1, const double &amp;kv_type_2)</td></tr>
<tr class="memdesc:a86a35fe74e148b3b8d1456c2d6d67815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the gains for the partial joint task for the singularity strategy.  <br /></td></tr>
<tr class="separator:a86a35fe74e148b3b8d1456c2d6d67815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f321e7b89eb9f5bf381f760ede6d27" id="r_a55f321e7b89eb9f5bf381f760ede6d27"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a55f321e7b89eb9f5bf381f760ede6d27">handleAllSingularitiesAsType1</a> (const bool flag)</td></tr>
<tr class="memdesc:a55f321e7b89eb9f5bf381f760ede6d27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforces type 1 handling behavior if set to true, otherwise handle type 1 or type 2 as usual.  <br /></td></tr>
<tr class="separator:a55f321e7b89eb9f5bf381f760ede6d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7476ae0ba4062d992db925771b6d1943" id="r_a7476ae0ba4062d992db925771b6d1943"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a7476ae0ba4062d992db925771b6d1943">setType1Posture</a> (const VectorXd &amp;q_des)</td></tr>
<tr class="memdesc:a7476ae0ba4062d992db925771b6d1943"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the desired type 1 posture.  <br /></td></tr>
<tr class="separator:a7476ae0ba4062d992db925771b6d1943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a973337a289839a953671c7657546c" id="r_aa0a973337a289839a953671c7657546c"><td class="memItemLeft" align="right" valign="top"><a id="aa0a973337a289839a953671c7657546c" name="aa0a973337a289839a953671c7657546c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>enableSingularityHandling</b> ()</td></tr>
<tr class="memdesc:aa0a973337a289839a953671c7657546c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables singularity handling. <br /></td></tr>
<tr class="separator:aa0a973337a289839a953671c7657546c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a2766ea386e25e3e732062edbf12602" id="r_a0a2766ea386e25e3e732062edbf12602"><td class="memItemLeft" align="right" valign="top"><a id="a0a2766ea386e25e3e732062edbf12602" name="a0a2766ea386e25e3e732062edbf12602"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>disableSingularityHandling</b> ()</td></tr>
<tr class="memdesc:a0a2766ea386e25e3e732062edbf12602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables singularity handling. <br /></td></tr>
<tr class="separator:a0a2766ea386e25e3e732062edbf12602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f068b64fc44bc847d6697cf15eb74f" id="r_a74f068b64fc44bc847d6697cf15eb74f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSaiPrimitives_1_1SingularityHandler.html#a74f068b64fc44bc847d6697cf15eb74f">setSingularityHandlingParams</a> (const double &amp;s_abs_tol, const double &amp;type_1_tol, const double &amp;type_2_torque_ratio, const double &amp;type_2_angle_threshold, const double &amp;perturb_step_size, const int &amp;buffer_size)</td></tr>
<tr class="memdesc:a74f068b64fc44bc847d6697cf15eb74f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the singularity handling parameters for classification.  <br /></td></tr>
<tr class="separator:a74f068b64fc44bc847d6697cf15eb74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a97a2c22759fcccaed3662e913731449d" name="a97a2c22759fcccaed3662e913731449d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97a2c22759fcccaed3662e913731449d">&#9670;&#160;</a></span>SingularityHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SaiPrimitives::SingularityHandler::SingularityHandler </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; SaiModel::SaiModel &gt;&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>link_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Affine3d &amp;&#160;</td>
          <td class="paramname"><em>compliant_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>task_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool &amp;&#160;</td>
          <td class="paramname"><em>verbose</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new Singularity Handler task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">robot</td><td>robot model from motion force task </td></tr>
    <tr><td class="paramname">link_name</td><td>control link of motion force task </td></tr>
    <tr><td class="paramname">compliant_frame</td><td>compliant frame of motion force task </td></tr>
    <tr><td class="paramname">task_rank</td><td>rank of the motion force task after partial task projection </td></tr>
    <tr><td class="paramname">verbose</td><td>set to true to print singularity status every timestep </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3cb4d6c8ba6b880be03923ebf8210d46" name="a3cb4d6c8ba6b880be03923ebf8210d46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cb4d6c8ba6b880be03923ebf8210d46">&#9670;&#160;</a></span>computeTorques()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VectorXd SaiPrimitives::SingularityHandler::computeTorques </td>
          <td>(</td>
          <td class="paramtype">const VectorXd &amp;&#160;</td>
          <td class="paramname"><em>unit_mass_force</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const VectorXd &amp;&#160;</td>
          <td class="paramname"><em>force_related_terms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the torques from the singularity handling. If the projected jacobian isn't classified singular, then the torque is computed as usual. If the projected jacobian is classified singular, then the torque is computed as \tau = \tau_{ns} + (1 - _alpha) * \tau_{joint strategy} + \alpha * \tau_{s} where \alpha is the linear blending ratio, \tau_{ns} is the torque computed from the non-singular terms, \tau_{s} is the torque computed from the singular terms, and \tau_{joint strategy} is the torque computed from the singularity strategy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unit_mass_force</td><td>Desired unit mass forces from motion force task </td></tr>
    <tr><td class="paramname">force_related_terms</td><td>Desired forces from motion force task </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>VectorXd Torque vector </dd></dl>

</div>
</div>
<a id="ab6e626bc2a60dea2372cce7ba358823e" name="ab6e626bc2a60dea2372cce7ba358823e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6e626bc2a60dea2372cce7ba358823e">&#9670;&#160;</a></span>getNullspace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MatrixXd SaiPrimitives::SingularityHandler::getNullspace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the nullspace. </p>
<dl class="section return"><dt>Returns</dt><dd>MatrixXd nullspace </dd></dl>

</div>
</div>
<a id="a55f321e7b89eb9f5bf381f760ede6d27" name="a55f321e7b89eb9f5bf381f760ede6d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55f321e7b89eb9f5bf381f760ede6d27">&#9670;&#160;</a></span>handleAllSingularitiesAsType1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::handleAllSingularitiesAsType1 </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enforces type 1 handling behavior if set to true, otherwise handle type 1 or type 2 as usual. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>true to enforce type 1 handling behavior </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a290bfb604dc08038bae73563dbae161e" name="a290bfb604dc08038bae73563dbae161e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a290bfb604dc08038bae73563dbae161e">&#9670;&#160;</a></span>setDynamicDecouplingType()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::setDynamicDecouplingType </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceSaiPrimitives.html#afca8ab8f36feaebb1870cc5d4002e9a7">DynamicDecouplingType</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the dynamic decoupling type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>DynamicDecoupling type </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9f03bbda20e55a20ba68a231e0248d6c" name="a9f03bbda20e55a20ba68a231e0248d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f03bbda20e55a20ba68a231e0248d6c">&#9670;&#160;</a></span>setSingularityHandlingBounds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::setSingularityHandlingBounds </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>s_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>s_max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the singularity bounds for torque blending based on the inverse of the condition number The linear blending coefficient \alpha is computed as \alpha = (s - _s_min) / (_s_max - _s_min), and is clamped between 0 and 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s_min</td><td>lower bound </td></tr>
    <tr><td class="paramname">s_max</td><td>upper bound </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a86a35fe74e148b3b8d1456c2d6d67815" name="a86a35fe74e148b3b8d1456c2d6d67815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86a35fe74e148b3b8d1456c2d6d67815">&#9670;&#160;</a></span>setSingularityHandlingGains()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::setSingularityHandlingGains </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>kp_type_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>kv_type_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>kv_type_2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the gains for the partial joint task for the singularity strategy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kp_type_1</td><td>position gain for type 1 strategy </td></tr>
    <tr><td class="paramname">kv_type_1</td><td>velocity damping gain for type 1 strategy </td></tr>
    <tr><td class="paramname">kv_type_2</td><td>velocity damping gain for type 2 strategy </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a74f068b64fc44bc847d6697cf15eb74f" name="a74f068b64fc44bc847d6697cf15eb74f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74f068b64fc44bc847d6697cf15eb74f">&#9670;&#160;</a></span>setSingularityHandlingParams()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::setSingularityHandlingParams </td>
          <td>(</td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>s_abs_tol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>type_1_tol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>type_2_torque_ratio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>type_2_angle_threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double &amp;&#160;</td>
          <td class="paramname"><em>perturb_step_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the singularity handling parameters for classification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s_abs_tol</td><td>if all singular values are below this value, then the task is fully singular </td></tr>
    <tr><td class="paramname">type_1_tol</td><td>tolerance to classify type 1 singularity </td></tr>
    <tr><td class="paramname">type_2_torque_ratio</td><td>torque ratio of max torques to move joints for type 2 singularity </td></tr>
    <tr><td class="paramname">type_2_angle_threshold</td><td>reverses the torque direction if joint approaches within the angle threshold for type 2 singularity </td></tr>
    <tr><td class="paramname">perturb_step_size</td><td>step size to take for singularity classification </td></tr>
    <tr><td class="paramname">buffer_size</td><td>buffer size to store singularity classification history </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7476ae0ba4062d992db925771b6d1943" name="a7476ae0ba4062d992db925771b6d1943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7476ae0ba4062d992db925771b6d1943">&#9670;&#160;</a></span>setType1Posture()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::setType1Posture </td>
          <td>(</td>
          <td class="paramtype">const VectorXd &amp;&#160;</td>
          <td class="paramname"><em>q_des</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the desired type 1 posture. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">q_des</td><td>desired posture </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeb62b4276c070f27ff6e32b4fba2664f" name="aeb62b4276c070f27ff6e32b4fba2664f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb62b4276c070f27ff6e32b4fba2664f">&#9670;&#160;</a></span>updateTaskModel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SaiPrimitives::SingularityHandler::updateTaskModel </td>
          <td>(</td>
          <td class="paramtype">const MatrixXd &amp;&#160;</td>
          <td class="paramname"><em>projected_jacobian</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const MatrixXd &amp;&#160;</td>
          <td class="paramname"><em>N_prec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the model quantities for the singularity handling task, and performs singularity classification. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">projected_jacobian</td><td>Projected jacobian from motion force task </td></tr>
    <tr><td class="paramname">N_prec</td><td>Nullspace of preceding tasks from motion force task </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/runner/work/sai-primitives/sai-primitives/src/tasks/<a class="el" href="SingularityHandler_8h_source.html">SingularityHandler.h</a></li>
<li>/home/runner/work/sai-primitives/sai-primitives/src/tasks/<b>SingularityHandler.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
